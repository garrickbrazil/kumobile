/*
    This file is part of KetteringJS.

    KetteringJS is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    KetteringJS is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with KetteringJS.  If not, see <http://www.gnu.org/licenses/>.
*/
var KU={KetteringJS:{version:"v0.0.9",updated:"7/26/2015",name:"KetteringJS",license:"GPL3"}};!function(t){function e(t,e){return this.title=t,this.mainHtml=e,this}var i={},r=null;i.retrieve=function(t,i,s){var n;n=0!=t?"http://my.kettering.edu/announcements?page="+t:"http://my.kettering.edu/announcements/",r=t,$.ajax({url:n,type:"GET",dataType:"html",success:function(t){var r=[];$("<div>").html(t).find(".views-row").each(function(t){var i=$("h3:first",this).text(),s=$(this);s.find("h3:first").remove(),r[t]=new e(i,s.html())}),i(r)},error:function(t,e,i){s(i)}})},i.nextPage=function(t,e){null==r?r=0:r++,i.retrieve(r,t,e)},i.previousPage=function(t,e){null==r?r=0:0>r-1?r=0:r--,i.retrieve(r,t,e)},t.Announcements=i}(KU),function(t){function e(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="NOPQRSTUVWXYZABCDEFGHIJKLMnopqrstuvwxyzabcdefghijklm0123456789",r=[],s="",n=0;n<=e.length;n++)r[e.substr(n,1)]=i.substr(n,1);for(var n=0;n<=t.length;n++){var a=t.charAt(n);s+=a in r?r[a]:a}return s}function i(t,e){this.name=t,this.valueId=e}function r(t,e){return this.message=t,this.weight=e,this}function s(t,e,i){return this.fullName=t,this.info=e,this.imgUrl=i,this}var n={},a=null,o=null;n.abort=function(){null!=o&&(o.abort(),o=null)},n.search=function(t,i,n,l,d,c,h){if(void 0==h)var h=0;if(null!=o)return void c("One search is already occurring. Please cancel first.");a={page:h,firstName:t,lastName:i,ext:n,departmentId:l};var u="http://my.kettering.edu/faculty-staff/directory?field_faculty_staff_first_value="+encodeURIComponent(t)+"&field_faculty_staff_last_value="+encodeURIComponent(i)+"&field_phone_extension_value="+n+"&tid="+l+"&page=0"+h;o=$.ajax({url:u,type:"GET",dataType:"html",success:function(t){var i=[],n=$("<div>").html(t).find(".directory-caption");n.each(function(t){if($("img",this).length>0)var n=$("img",this).eq(0).attr("src");else var n="images/default_directory_icon.jpg";"/"==n[0]&&(n="http://my.kettering.edu"+n);var a=$("h3",this).first().text(),o=[],l=0;$(".inside span",this).each(function(t){var i=$(this).clone().children().remove().end().text();$(this).hasClass("obfuscated")&&(i=i.split("").reverse().join(""),i=e(i)),""==i.replace(/\s+/g,"")||$(this).find(".tel").length>0||(o[l++]=new r(i,$(this).hasClass("bold")?"bold":""))}),i[t]=new s(a,o,n)}),o=null,d(i)},error:function(t,e,i){o=null,"abort"!=e&&c(i)}})},n.nextPage=function(t,e){return null==a?void e("Please search before you attempt to get Next Page"):void n.search(a.firstName,a.lastName,a.ext,a.departmentId,t,e,a.page+1)},n.previousPage=function(t,e){return null==a?void e("Please search before you attempt to get Previous Page"):a.page-1<0?void t([]):void n.search(a.firstName,a.lastName,a.ext,a.departmentId,t,e,a.page-1)},n.getDepartments=function(t,e){var r="http://my.kettering.edu/faculty-staff/directory?field_faculty_staff_first_value=&field_faculty_staff_last_value=&field_phone_extension_value=KUMOBILE&tid=All";$.ajax({url:r,type:"GET",dataType:"html",success:function(e){var r=[],s=$("<div>").html(e).find("#edit-tid option");s.each(function(t){var e=$(this).attr("value"),s=$(this).text();r[t]=new i(s,e)}),t(r)},error:function(t){e(t)}})},t.Directory=n}(KU),function(t){function e(t,e){return this.title=t,this.mainHtml=e,this}function i(t,e,i,s,n,a,o,l,d){return this.title=t,this.location=e,this.time=i,this.month=s,this.dayOfTheMonth=n,this.dayOfTheWeek=a,this.tags=o,this.imgUrl=l,this.detailsUrl=d,this.getEvent=function(t,e){r.downloadEventDetails(d,t,e)},this}var r={},s=null;r.downloadEventDetails=function(t,i,r){var t="http://my.kettering.edu/"+t;$.ajax({url:t,type:"GET",dataType:"html",success:function(t){var r=$("<div>").html(t),s=r.find(".content.clearfix"),n=r.find(".title.inside").text(),a=new e(n,s);i(a)},error:function(t,e,i){r(i)}})},r.retrieve=function(t,e,r){var n;n=0!=t?"http://my.kettering.edu/events?page="+t:"http://my.kettering.edu/events",s=t,$.ajax({url:n,type:"GET",dataType:"html",success:function(t){var r,s,n,a=[];$("<div>").html(t).find(".views-row").each(function(t){if($("img",this).length>0)var e=$("img",this).eq(0).attr("src");else var e="";"/"==e[0]&&(e="http://my.kettering.edu"+e);var o=$("h3",this).text(),l=$(".info .location",this).text(),d=$(".tags",this).text(),c=$("h3 a",this).attr("href");if(2==$(".info .date-display-single",this).length)var h=$(".info .date-display-single",this).eq(0).text()+" - "+$(".info .date-display-single",this).eq(1).text();else var h=$(".info .date-display-single",this).eq(0).text();$(this).hasClass("views-row-1")&&(r=$(".datebox",this).find(".month").text(),n=$(".datebox",this).find(".lower .dow").text(),s=$(".datebox",this).find(".day").text(),r=r.replace("Jan","January"),r=r.replace("Feb","February"),r=r.replace("Mar","March"),r=r.replace("Apr","April"),r=r.replace("Jun","June"),r=r.replace("Jul","July"),r=r.replace("Aug","August"),r=r.replace("Sep","September"),r=r.replace("Oct","October"),r=r.replace("Nov","Novemeber"),r=r.replace("Dec","December")),a[t]=new i(o,l,h,r,s,n,d,e,c)}),e(a)},error:function(t,e,i){r(i)}})},r.nextPage=function(t,e){null==s?s=0:s++,r.retrieve(s,t,e)},r.previousPage=function(t,e){null==s?s=0:0>s-1?s=0:s--,r.retrieve(s,t,e)},t.Events=r}(KU),function(t){function e(t,e,i,r,s){this.title=t,this.author=e,this.callNumber=i,this.holdings=r,this.imgUrl=s}var i={},r=null,s=null,n=[{valueId:"GENERAL^SUBJECT^GENERAL^^words or phrase",name:"Words or Phrase"},{valueId:"AU^AUTHOR^AUTHORS^Author Processing^author",name:"Author"},{valueId:"TI^TITLE^SERIES^Title Processing^title",name:"Title"},{valueId:"SU^SUBJECT^SUBJECTS^^subject",name:"Subject"},{valueId:"SER^SERIES^SERIES^Title Processing^series",name:"Series"},{valueId:"PER^PERTITLE^SERIES^Title Processing^periodical title",name:"Periodical"}];i.search=function(t,i,n,a,o){if(void 0!=o)var l="http://catalog.palnet.info"+o.action+"?firsthit=&lasthit=&form_type=JUMP%5E"+(20*o.page+1),d=o.page;else var l="http://elibrary.palnet.info/uhtbin/cgisirsi/x/0/0/57/5?library=KU&location=KUMAIN&match_on=KEYWORD&shadow=NO&user_id=kuweb&srchfield1="+encodeURIComponent(i)+"&searchdata1="+encodeURIComponent(t),d=0;s=$.ajax({url:l,type:"GET",dataType:"html",success:function(a){var o=[],l=$("<div>").html(a),c=l.find(".hit_list_row"),h=l.find("#hitlist").first().attr("action");r={action:h,field:t,searchOptionId:i,page:d},c.each(function(t){if($(".hit_list_list_cover script",this).length>0){var i=$(".hit_list_list_cover script",this).eq(0).text().replace(/\s/g,"").replace("getHitCover('","").replace("');",""),r="",s=i.split("','");8==s.length&&(r=s[0]+"isbn="+s[2].replace(/,.+/g,"")+"/SC.GIF&client="+s[1]+"&type=xw12&upc=&oclc="+s[4].replace(/,.+/g,""))}else var r="";var n=$(".title",this).first().text().trim(),a=$(".author",this).first().text().trim(),l=$(".call_number",this).first().text().trim(),d=$(".holdings_statement",this).first().text().trim();o[t]=new e(n,a,l,d,r)}),s=null,n(o)},error:function(t,e,i){s=null,"abort"!=e&&a(i)}})},i.nextPage=function(t,e){r.page++,i.search(r.field,r.searchOptionId,t,e,r)},i.getSearchOptions=function(){return n},i.abort=function(){null!=s&&(s.abort(),s=null)},t.Library=i}(KU),function(t){function e(t,e,i){return this.title=t,this.headerInfo=e,this.mainHtml=i,this}function i(t,e,i,s,n){return this.getArticle=function(t,e){r.downloadArticle(n,t,e)},this.title=t,this.author=e,this.date=i,this.imgUrl=s,this.detailsUrl=n,this}var r={},s=null;r.downloadArticle=function(t,i,r){var s="http://my.kettering.edu/"+t;$.ajax({url:s,type:"GET",dataType:"html",success:function(t){var r=$("<div>").html(t),s=r.find(".field.field-name-body.field-type-text-with-summary.field-label-hidden"),n=r.find(".news").text(),a=r.find(".info").text(),o=new e(n,a,s);i(o)},error:function(t,e,i){r(i)}})},r.retrieve=function(t,e,r){var n;n=0!=t?"http://my.kettering.edu/news/current-news?page="+t:"http://my.kettering.edu/news/current-news",s=t,$.ajax({url:n,type:"GET",dataType:"html",success:function(t){var r=[];$("<div>").html(t).find(".news-caption").each(function(t){if($("img",this).length>0)var e=$("img",this).eq(0).attr("src");else var e="";"/"==e[0]&&(e="http://my.kettering.edu"+e);var s=$("h3",this).text(),n=$(".info .by",this).text(),a=$(".info .date",this).text(),o=$(".more",this).attr("href");r[t]=new i(s,n,a,e,o)}),e(r)},error:function(t,e,i){r(i)}})},r.nextPage=function(t,e){null==s?s=0:s++,r.retrieve(s,t,e)},r.previousPage=function(t,e){null==s?s=0:0>s-1?s=0:s--,r.retrieve(s,t,e)},t.News=r}(KU),function(t){var e={};e.JWEB={CatalogEntry:function(t,e,i,r,s,n,a,o,l,d,c,h,u,m){this.status=t,this.crn=e,this.courseId=i,this.section=r,this.campus=s,this.credits=n,this.title=a,this.days=o,this.time=l,this.capacity=d,this.active=c,this.professor=h,this.startDate=u,this.room=m},AwardYear:function(t,e){this.years=t,this.entries=e},AwardEntry:function(t,e,i,r,s,n){this.name=t,this.offered=e,this.accepted=i,this.declined=r,this.cancelled=s,this.paidToDate=n},AccountTerm:function(t,e,i,r,s){this.term=t,this.totalCharges=e,this.totalCredits=i,this.balance=r,this.entries=s},AccountEntry:function(t,e,i){this.code=t,this.description=e,this.total=i},EvalProgram:function(t,e,i){this.name=t,this.sourceId=e,this.programId=i},FinalGrade:function(t,e,i,r,s,n,a){this.crn=t,this.courseId=e,this.section=i,this.title=r,this.campus=s,this.grade=n,this.earnedCredits=a},EvalArea:function(t,e,i,r,s,n){this.met=t,this.name=e,this.requiredCredits=i,this.earnedCredits=r,this.gpa=s,this.requiredCourses=n},EvalCourse:function(t,e,i,r,s,n,a,o){this.met=t,this.name=e,this.takenCourseId=i,this.takenCourseTitle=r,this.takenTerm=s,this.takenCredits=n,this.takenGrade=a,this.details=o},Evaluation:function(t,e,i,r,s,n,a,o,l,d,c,h,u,m,f,p,v,g,$,x){this.fullName=t,this.idNumber=e,this.college=i,this.degree=r,this.level=s,this.majors=n,this.catalog=a,this.expectedGraduation=o,this.date=l,this.minors=d,this.concentrations=c,this.creditsMet=h,this.requiredCredits=u,this.usedCredits=m,this.transferCredits=f,this.overallGPAMet=v,this.programGPAMet=p,this.programGPA=g,this.overallGPA=$,this.evalAreas=x},Book:function(t,e,i,r,s){this.title=t,this.edition=e,this.imgUrl=i,this.author=r,this.isbn=s},Course:function(t,e,i,r,s,n,a,o,l,d,c,h){this.courseTitle=t,this.courseId=e,this.section=i,this.term=r,this.crn=s,this.professor=n,this.credits=a,this.campus=o,this.type=l,this.time=d,this.days=c,this.location=h},StudentInfo:function(t,e,i,r,s,n,a,o,l,d,c){this.fullName=t,this.idNumber=e,this.standing=i,this.transferCredits=r,this.regularCredits=s,this.program=n,this.college=a,this.major=o,this.concentration=l,this.minor=d,this.specialty=c},login:function(t,e,i,r){var s="https://jweb.kettering.edu/cku1/twbkwbis.P_ValLogin";$.ajax({url:s,type:"POST",dataType:"html",success:function(s,n,a){var o="https://jweb.kettering.edu/cku1/twbkwbis.P_ValLogin";$.ajax({url:o,type:"POST",dataType:"html",data:{sid:t,PIN:e},success:function(t,e,s){var n=/.*<meta.*url=\/cku1\/twbkwbis\.P_GenMenu.*>.*/;n.test(t)?i():r("Bad user id / password")},error:function(t,e,i){r(i)}})},error:function(t,e,i){r(i)}})},logout:function(t,e){var i="https://jweb.kettering.edu/cku1/twbkwbis.P_Logout";$.ajax({url:i,type:"POST",dataType:"html",success:function(e,i,r){t()},error:function(t,i,r){e(r)}})},retrieveAccountSummary:function(t,i){var r="https://jweb.kettering.edu/cku1/bwskoacc.P_ViewAcct";$.ajax({url:r,type:"GET",dataType:"html",success:function(r,s,n){if(KU.Student.JWEB.isErrorPage(r))return void i("Request failed");var a=$("<div>").html(r),o=function(t){return t.text().trim().toLowerCase()},l=/[a-zA-Z]+\s+\d\d\d\d/,d=/\$0+(\.0+)?/,c="0",h=[],u=[],m="",f="",p="",v="",g="",x="",b="",y="";$(".datadisplaytable",a).find("tr").each(function(t){if(1==$("th",this).size()&&1==$("td",this).size()){var i=o($("th",this).eq(0)),r=$("td",this).eq(0).text().trim();"account balance:"===i?c=r:"term charges:"===i?f=r:"term credits and payments:"===i?p=r:"term balance:"===i&&(v=r,h[h.length]=new e.JWEB.AccountTerm(m,f,p,v,u),u=[],m="",f="",p="",v="",g="",x="",b="",y="")}else if(1==$("th",this).size()&&0==$("td",this).size()){var i=$("th",this).eq(0).text().trim();l.test(i)&&(m=i)}else 5==$("td",this).size()?(x=$("td",this).eq(0).text().trim(),b=$("td",this).eq(1).text().trim(),charge=$("td",this).eq(2).text().trim(),credit=$("td",this).eq(3).text().trim(),y=""==charge?credit:d.test(charge)?charge:"-"+charge,u[u.length]=new e.JWEB.AccountEntry(x,b,y)):5==$("td",this).size()&&(x=$("td",this).eq(0).text().trim(),b=$("td",this).eq(1).text().trim(),charge=$("td",this).eq(2).text().trim(),credit=$("td",this).eq(3).text().trim(),y=""==charge?credit:d.test(charge)?charge:"-"+charge,u[u.length]=new e.JWEB.AccountEntry(x,b,y))}),t(c,h)},error:function(t,e,r){i(r)}})},retrieveCurrentHolds:function(t,e){var i="http://jweb.kettering.edu/cku1/bwskoacc.P_ViewHold";$.ajax({url:i,type:"GET",dataType:"html",success:function(i,r,s){if(KU.Student.JWEB.isErrorPage(i))return void e("Request failed");var n=$("<div>").html(i),a=!1;$("table.plaintable",n).each(function(e){a||"This layout table holds message information"!=$(this).attr("summary").trim()||(t($(this).html()),a=!0)}),a||t("Nothing to show!")},error:function(t,i,r){e(r)}})},retrieveTranscript:function(t,e){var i="https://jweb.kettering.edu/cku1/ku_web_trans.view_transcript?tprt=SHRTRTC&levl=U";$.ajax({url:i,type:"POST",dataType:"html",success:function(i,r,s){if(KU.Student.JWEB.isErrorPage(i))return void e("Request failed");var n=$("<div>").html(i);t(n.html())},error:function(t,i,r){e(r)}})},retrieveAwardHistory:function(t,i){var r="https://jweb.kettering.edu/cku1/bwrkrhst.P_DispAwdHst";$.ajax({url:r,type:"GET",dataType:"html",success:function(r,s,n){if(KU.Student.JWEB.isErrorPage(r))return void i("Request failed");var a=$("<div>").html(r),o=/[a-zA-Z\s]+\s([a-zA-Z]+\s\d\d\d\d\sto\s[a-zA-Z]+\s\d\d\d\d)/,l=[];a.find("table.datadisplaytable").each(function(t){var i="",r=[];groups=o.exec($("caption.captiontext",this).text().trim()),2==groups.length&&(i=groups[1]),$("tr",this).each(function(t){var i=$("td",this);if(7==i.size()){var s="",n="",a="",o="",l="",d="";s=i.eq(0).text().trim(),n=i.eq(1).text().trim(),a=i.eq(2).text().trim(),o=i.eq(3).text().trim(),l=i.eq(4).text().trim(),d=i.eq(6).text().trim(),r[r.length]=new e.JWEB.AwardEntry(s,n,a,o,l,d)}}),l[l.length]=new e.JWEB.AwardYear(i,r)}),t(l)},error:function(t,e,r){i(r)}})},retrieveScheduleCatalog:function(t,i,r){var s="https://jweb.kettering.edu/cku1/bwskfcls.P_GetCrse_Advanced?rsts=dummy&crn=dummy&term_in="+t+"&sel_subj=dummy&sel_day=dummy&sel_schd=dummy&sel_insm=dummy&sel_camp=dummy&sel_levl=dummy&sel_sess=dummy&sel_instr=dummy&sel_ptrm=dummy&sel_attr=dummy&sel_subj=SSCI&sel_subj=ACCT&sel_subj=BINF&sel_subj=BIOL&sel_subj=BUSN&sel_subj=CHME&sel_subj=CHEM&sel_subj=CHN&sel_subj=COMM&sel_subj=CE&sel_subj=CS&sel_subj=CUE&sel_subj=ECON&sel_subj=ECE&sel_subj=EE&sel_subj=FINC&sel_subj=FYE&sel_subj=GER&sel_subj=HIST&sel_subj=HUMN&sel_subj=IME&sel_subj=ISYS&sel_subj=INEN&sel_subj=MFGO&sel_subj=LS&sel_subj=LIT&sel_subj=MGMT&sel_subj=MRKT&sel_subj=MATH&sel_subj=MECH&sel_subj=MEDI&sel_subj=PHIL&sel_subj=PHYS&sel_subj=SSCI&sel_subj=SOC&sel_crse=&sel_title=&sel_from_cred=&sel_to_cred=&sel_instr=%25&begin_hh=0&begin_mi=0&begin_ap=0&end_hh=0&end_mi=0&end_ap=a&SUB_BTN=Section+Search&path=1";$.ajax({url:s,type:"GET",dataType:"html",success:function(t,s,n){if(KU.Student.JWEB.isErrorPage(t))return void r("Request failed");var a=$("<div>").html(t),o=[],l="",d="",c="",h="",u="",m="",f="",p="",v="",g="",x="",b="",y="",_="";a.find("table.datadisplaytable tr").each(function(t){var i=$("td",this);17==i.size()&&(""!=i.eq(1).text().trim()&&(l=i.eq(0).text().trim(),d=i.eq(1).text().trim(),c=i.eq(2).text().trim()+"-"+i.eq(3).text().trim(),h=i.eq(4).text().trim(),u=i.eq(5).text().trim(),m=i.eq(6).text().trim(),f=i.eq(7).text().trim()),p=i.eq(8).text().trim(),v=i.eq(9).text().trim(),g=i.eq(10).text().trim(),x=i.eq(11).text().trim(),b=i.eq(13).text().trim(),y=i.eq(14).text().trim(),_=i.eq(15).text().trim(),o[o.length]=new e.JWEB.CatalogEntry(l,d,c,h,u,m,f,p,v,g,x,b,y,_))}),i(o)},error:function(t,e,i){r(i)}})},retrieveScheduleTerms:function(t,e){var i="https://jweb.kettering.edu/cku1/bwskflib.P_SelDefTerm";$.ajax({url:i,type:"GET",dataType:"html",success:function(i,r,s){if(KU.Student.JWEB.isErrorPage(i))return void e("Request failed");var n=$("<div>").html(i),a=[];n.find("#term_id option").each(function(t){a[a.length]=$(this).val()}),t(a)},error:function(t,i,r){e(r)}})},retrieveFinalTerms:function(t,e){var i="https://jweb.kettering.edu/cku1/wbwskogrd.P_ViewTermGrde";$.ajax({url:i,type:"GET",dataType:"html",success:function(i,r,s){if(KU.Student.JWEB.isErrorPage(i))return void e("Request failed");var n=$("<div>").html(i),a=[];n.find("#term_id option").each(function(t){a[a.length]=$(this).val()}),t(a)},error:function(t,i,r){e(r)}})},retrieveFinalGrades:function(t,i,r){var s="https://jweb.kettering.edu/cku1/wbwskogrd.P_ViewGrde?term_in="+t+"&inam=on&snam=on&sgid=on";$.ajax({url:s,type:"GET",dataType:"html",success:function(t,s,n){if(KU.Student.JWEB.isErrorPage(t))return void r("Request failed");var a=$("<div>").html(t),o=function(t){return t.text().trim().toLowerCase()},l="",d="",c="",h=[];a.find("table.datadisplaytable").each(function(t){$(this).find("tr").each(function(t){if(1==$("th",this).size()&&1==$("td",this).size()&&(label=o($("th",this).eq(0)),info=$("td",this).eq(0).text().trim(),"term:"===label&&(l=info)),12==$("td",this).size()){children=$("td",this);var i=children.eq(0).text().trim(),r=children.eq(1).text().trim()+"-"+children.eq(2).text().trim(),s=children.eq(3).text().trim(),n=children.eq(4).text().trim(),a=children.eq(5).text().trim(),u=children.eq(6).text().trim(),m=children.eq(8).text().trim();h[h.length]=new e.JWEB.FinalGrade(i,r,s,n,a,u,m)}1==$("th",this).size()&&5==$("td",this).size()&&(label=o($("th",this).eq(0)),gpaInfo=$("td",this).eq(4).text().trim(),"current term:"===label&&(d=gpaInfo),"overall:"===label&&(c=gpaInfo))})}),i(l,d,c,h)},error:function(t,e,i){r(i)}})},generateEvaluation:function(t,e,i,r,s){var n="https://jweb.kettering.edu/cku1/bwckcapp.P_Submit?source1="+t+"&program="+e+"&ctlg_term="+i+"&eval_term=999999&dflt_ip=Y";$.ajax({url:n,type:"GET",dataType:"html",success:function(t,e,i){return KU.Student.JWEB.isErrorPage(t)?void s("Request failed"):void r()},error:function(t,e,i){s(i)}})},retrieveEvalPrograms:function(t,i,r){var s="https://jweb.kettering.edu/cku1/bwckcapp.P_DispEvalTerm?term_in="+t;$.ajax({url:s,type:"GET",dataType:"html",success:function(t,s,n){if(KU.Student.JWEB.isErrorPage(t))return void r("Request failed");var a=$("<div>").html(t);programs=[];var o=a.find("input[name=source1]").attr("value");a.find("table.dataentrytable").each(function(t){programId=$("input[name=program]",this).attr("value"),name=$("tr:first td:last",this).text().trim(),programs[programs.length]=new e.JWEB.EvalProgram(name,o,programId)}),i(programs)},error:function(t,e,i){r(i)}})},retrieveEvaluation:function(t,i,r,s){var n="https://jweb.kettering.edu/cku1/bwckcapp.P_DispCurrent?term_in="+t;$.ajax({url:n,type:"GET",dataType:"html",success:function(t,n,a){if(KU.Student.JWEB.isErrorPage(t))return void s("Request failed");var o="https://jweb.kettering.edu/cku1/bwckcapp.P_VerifyDispEvalViewOption?request_no="+i+"&program_summary=3";$.ajax({url:o,type:"GET",dataType:"html",success:function(t,i,n){if(KU.Student.JWEB.isErrorPage(t))return void s("Request failed");var a=$("<div>").html(t),o=function(t){return t.text().trim().toLowerCase()};if(a.find("table.datadisplaytable").size()<2)return void s("Invalid evaluation page found.");var l,d="",c="",h="",u="",m="",f="",p="",v="",g="",x="",b=/(\d\d\d\d+)\s(.*)\n.*/,y=b.exec($(".staticheaders",a).text().trim());g=3===y.length?y[2]:"",x=3===y.length?y[1]:"",a.find("table.datadisplaytable").eq(0).find("tr").each(function(t){var e=$("th.ddlabel, td.dddefault",this);for(t=0;t+1<e.size();t+=2)"college :"===o(e.eq(t))&&(d=e.eq(t+1).text().trim()),"degree :"===o(e.eq(t))&&(c=e.eq(t+1).text().trim()),"level :"===o(e.eq(t))&&(h=e.eq(t+1).text().trim()),"majors :"===o(e.eq(t))&&(u=e.eq(t+1).text().trim().replace(/\n+/g,", ")),"catalog term :"===o(e.eq(t))&&(m=e.eq(t+1).text().trim()),"expected graduation date :"===o(e.eq(t))&&(l=e.eq(t+1).text().trim()),"results as of :"===o(e.eq(t))&&(f=e.eq(t+1).text().trim()),"minors :"===o(e.eq(t))&&(p=e.eq(t+1).text().trim().replace(/\n+/g,", ")),"concentrations :"===o(e.eq(t))&&(v=e.eq(t+1).text().trim().replace(/\n+/g,", ")),v=v.replace(/\n+/g,", ")});var _="",q="",w="",E="",T="",k="",j="",I="";a.find("table.datadisplaytable").eq(1).find("tr").each(function(t){1==$("th",this).size()&&5==$("td",this).size()&&("total required :"===o($("th",this))&&(_="yes"===o($("td",this).eq(0)),q=$("td",this).eq(1).text().trim(),w=$("td",this).eq(2).text().trim()),"program gpa :"===o($("th",this))&&("yes"===o($("td",this).eq(0))?T=!0:"no"===o($("td",this).eq(0))&&(T=!1),j=$("td",this).eq(2).text().trim()),"overall gpa :"===o($("th",this))&&("yes"===o($("td",this).eq(0))?k=!0:"no"===o($("td",this).eq(0))&&(k=!1),I=$("td",this).eq(2).text().trim()),"transfer :"===o($("th",this))&&(E=$("td",this).eq(2).text().trim()))});for(var B=[],C=/([a-zA-Z\s]+)\s*\(\s*(\d+\.\d+)\scredits\s*\)\s*-\s*(.*)/,S=2;S<a.find("table.datadisplaytable").size();S++){var P="",A="",U="",z="",G="",N="",J="",R="",O="",W="",q="",K="",D="",L=[],M=[];a.find("table.datadisplaytable").eq(S).find("tr").each(function(t){if(1==$("th",this).size()&&1==$("td",this).size()&&C.test($("td",this).eq(0).text().trim())){groups=C.exec($("td",this).eq(0).text().trim());for(var i in M){var r=M[i];r.details=J,L[L.length]=r}M=[],P="",A="",U="",z="",G="",N="",R="",J="",W=groups[1],q=groups[2],O="Met"==groups[3]}else if(17==$("td",this).size()){children=$("td",this);var s=o(children.eq(1));for(var i in M){var r=M[i];r.details=J,L[L.length]=r}M=[],P="",A="",U="",z="",G="",N="",R="",J="",P="yes"===o(children.eq(0)),A=children.eq(3).text().trim()+"-"+children.eq(5).text().trim(),U=children.eq(10).text().trim()+"-"+children.eq(11).text().trim(),z=children.eq(12).text().trim(),G=children.eq(9).text().trim(),N=children.eq(14).text().trim(),R=children.eq(15).text().trim(),(""===A||"-"===A)&&(A=children.eq(2).text().trim()),""!=A&&(L[L.length]=new e.JWEB.EvalCourse(P,A,U,z,G,N,R,J),P="",A="",U="",z="",G="",N="",R="",J="")}else if(12==$("td",this).size()){children=$("td",this);for(var i in M){var r=M[i];r.details=J,L[L.length]=r}M=[],P="",A="",U="",z="",G="",N="",R="",J="",P="yes"===o(children.eq(0)),A=children.eq(3).text().trim(),U=children.eq(5).text().trim()+"-"+children.eq(6).text().trim(),z=children.eq(7).text().trim(),G=children.eq(4).text().trim(),N=children.eq(9).text().trim(),R=children.eq(10).text().trim(),(""===A||"-"===A)&&(A=children.eq(2).text().trim()),""!=A&&(M[M.length]=new e.JWEB.EvalCourse(P,A,U,z,G,N,R,J),P="",U="",z="",G="",N="",R="",J="")}else if(10==$("td",this).size()&&"8"==$("td",this).eq(9).attr("colspan")){children=$("td",this);var s=o(children.eq(1));for(var i in M){var r=M[i];r.details=J,L[L.length]=r}M=[],P="",A="",U="",z="",G="",N="",R="",J="",P="yes"===o(children.eq(0)),A=children.eq(3).text().trim()+"-"+children.eq(5).text().trim(),(""===A||"-"===A)&&(A=children.eq(2).text().trim()),""==A||"("!==s&&")"!==s&&")and("!==s&&"and"!==s||(L[L.length]=new e.JWEB.EvalCourse(P,A,U,z,G,N,R,J),P="",A="",U="",z="",G="",N="",R="",J="")}else if(10==$("td",this).size())children=$("td",this),P=null,J=children.eq(1).text().trim(),U=children.eq(3).text().trim()+"-"+children.eq(4).text().trim(),z=children.eq(5).text().trim(),G=children.eq(2).text().trim(),N=children.eq(7).text().trim(),R=children.eq(8).text().trim(),""!=A&&(M[M.length]=new e.JWEB.EvalCourse(P,A,U,z,G,N,R,J),P="",U="",z="",G="",N="",R="");else if(3==$("td",this).size()&&"8"==$("td",this).eq(2).attr("colspan"))children=$("td",this),J=children.eq(1).text().trim();else if(8==$("td",this).size())children=$("td",this),P=null,U=children.eq(1).text().trim()+"-"+children.eq(2).text().trim(),z=children.eq(3).text().trim(),G=children.eq(0).text().trim(),N=children.eq(5).text().trim(),R=children.eq(6).text().trim(),""!=A&&(M[M.length]=new e.JWEB.EvalCourse(P,A,U,z,G,N,R,J),P="",U="",z="",G="",N="",R="");else if(2==$("td",this).size()){if(children=$("td",this),")"===children.eq(1).text().trim())for(var i in M){var r=M[i];r.details=J,L[L.length]=r}M=[],P="",A="",U="",z="",G="",N="",R="",J=""}else if(5==$("td",this).size()&&"8"==$("td",this).eq(4).attr("colspan")){children=$("td",this);for(var i in M){var r=M[i];r.details=J,L[L.length]=r}M=[],P="",A="",U="",z="",G="",N="",R="",J="",P="yes"===o(children.eq(0)),A=children.eq(3).text().trim(),U=children.eq(5).text().trim()+"-"+children.eq(6).text().trim(),(""===A||"-"===A)&&(A=children.eq(2).text().trim()),""!=A&&(M[M.length]=new e.JWEB.EvalCourse(P,A,U,z,G,N,R,J),P="",U="",z="",G="",N="",R="",J="")}else if(4==$("td",this).size()){children=$("td",this);for(var i in M){var r=M[i];r.details=J,L[L.length]=r}M=[],P="",A="",U="",z="",G="",N="",R="",J="",K=children.eq(1).text().trim(),D=children.eq(2).text().trim()}}),""!=W&&(B[B.length]=new e.JWEB.EvalArea(O,W,q,K,D,L))}evaluation=new e.JWEB.Evaluation(g,x,d,c,h,u,m,l,f,p,v,_,q,w,E,T,k,j,I,B),r(evaluation)},error:function(t,e,i){s(i)}})},error:function(t,e,i){s(i)}})},retrieveEvaluationList:function(t,e,i){var r="https://jweb.kettering.edu/cku1/bwcksmmt.P_DispPrevEval?term_in="+t;$.ajax({url:r,type:"GET",dataType:"html",success:function(t,r,s){if(KU.Student.JWEB.isErrorPage(t))return void i("Request failed");var n=$("<div>").html(t);if(n.find(".datadisplaytable tr").size()<2)return void e(0);var a=[];n.find(".datadisplaytable tr").each(function(t){var e=$("td",this);3==e.size()&&(a[a.length]=e.eq(1).text().trim())}),e(a)},error:function(t,e,r){i(r)}})},isErrorPage:function(t){var e=$("<div></div>").html(t);return $("#UserID",e).length>0&&$("#PIN",e).length>0},retrieveStudentInfo:function(t,e,i){var r="https://jweb.kettering.edu/cku1/bwskrsta.P_RegsStatusDisp?term_in="+t;$.ajax({url:r,type:"GET",dataType:"html",success:function(t,r,s){if(KU.Student.JWEB.isErrorPage(t))return void i("Request failed");var n,a,o,l,d,c,h,u,m,f,p,v=$("<div>").html(t),g=/(\d\d\d\d+)\s(.*)\n.*/,x=/Your\sClass\sfor\sregistration\spurposes\sis\s([a-zA-Z]+\s\d)\..*/,b=g.exec($(".staticheaders",v).text().trim());n=null!=b&&3===b.length?b[2]:"",a=null!=b&&3===b.length?b[1]:"",o="",$(".pldefault",v).each(function(t){var e=$(this).text().trim();x.test(e)&&(o=x.exec(e)[1])}),l="",d="",c="",h="",u="",m="",f="",p="";var y=function(t){return t.text().trim().toLowerCase()};$(".datadisplaytable tr",v).each(function(t){if(3===$("td",this).size()){var e=$("td",this);"undergraduate"===y(e.eq(0))&&"transfer"===y(e.eq(1))&&(l=e.eq(2).text().trim()),"undergraduate"===y(e.eq(0))&&"institutional"===y(e.eq(1))&&(d=e.eq(2).text().trim())}else"current program"===y($(this))&&t+1<$(".datadisplaytable tr",v).size()?c=$(".datadisplaytable tr",v).eq(t+1).text().trim():1===$("td",this).size()&&1===$("th",this).size()&&("college:"===y($("th",this).eq(0))?h=$("td",this).text().trim():"major:"===y($("th",this).eq(0))?(""!=u&&(u+=", "),u+=$("td",this).text().trim()):"minor:"===y($("th",this).eq(0))?(""!=f&&(f+=", "),f+=$("td",this).text().trim()):"concentration:"===y($("th",this).eq(0))?(""!=m&&(m+=", "),m+=$("td",this).text().trim()):"major concentration:"===y($("th",this).eq(0))&&(""!=p&&(p+=", "),p+=$("td",this).text().trim()))});var _=new KU.Student.JWEB.StudentInfo(n,a,o,l,d,c,h,u,m,f,p);e(_)},error:function(t,e,r){i(r)}})},retrieveRequiredBooks:function(t,e,i,r,s){var n="http://www.bkstr.com/webapp/wcs/stores/servlet/en/ketteringstore/textbooks-and-course-materials",a="https://www.bkstr.com/webapp/wcs/stores/servlet/LocateCourseMaterialsServlet?requestType=TERMS&storeId=345405&demoKey=d&programId=3663",o=/([a-zA-Z]+)[\-\s](\d+)/,l="",d="";return o.test(e)?(groups=o.exec(e),l=groups[1],d=groups[2],i=parseInt(i),void $.ajax({url:n,type:"GET",dataType:"html",timeout:25e3,success:function(e,n,o){$.ajax({url:a,type:"GET",dataType:"html",timeout:25e3,success:function(e,n,a){if(e=e.replace("<script>parent.doneLoaded('","").replace("')</script>",""),termObj=JSON.parse(e),null==termObj||void 0==termObj)return void s("Failure to get terms for required books.");for(var o=!1,c=0;c<termObj.data.length;c++)if(void 0!=termObj.data[c][t]){var h=termObj.data[c][t];o=!0;var u="http://www.bkstr.com/webapp/wcs/stores/servlet/CourseMaterialsResultsView?catalogId=10001&categoryId=9604&storeId=345405&langId=-1&programId=3663&termId="+h+"&divisionDisplayName=%20&departmentDisplayName="+l+"&courseDisplayName="+l+"%20"+d+"&sectionDisplayName="+i+"&demoKey=d&purpose=browse";$.ajax({url:u,type:"GET",dataType:"html",timeout:25e3,success:function(t,e,i){var s=$("<div>").html(t),n=[],a=[];$("#material-group-list_REQUIRED_1_1 li",s).each(function(t){$("h3.material-group-title",this).find("span").remove();var e=$("h3.material-group-title",this).text().trim();$("span#materialAuthor",this).find("strong").remove();var i=$("span#materialAuthor",this).text().trim();$("span#materialEdition",this).find("strong").remove();var r=$("span#materialEdition",this).text().trim();$("span#materialISBN",this).find("strong").remove();var s=$("span#materialISBN",this).text().trim(),a=$("span#materialTitleImage img:first",this).attr("src");n[n.length]=new KU.Student.JWEB.Book(e,r,a,i,s)}),$("#material-group-list_RECOMMENDED_1_1 li",s).each(function(t){$("h3.material-group-title",this).find("span").remove();var e=$("h3.material-group-title",this).text().trim();$("span#materialAuthor",this).find("strong").remove();var i=$("span#materialAuthor",this).text().trim();$("span#materialEdition",this).find("strong").remove();var r=$("span#materialEdition",this).text().trim();$("span#materialISBN",this).find("strong").remove();var s=$("span#materialISBN",this).text().trim(),n=$("span#materialTitleImage img:first",this).attr("src");a[a.length]=new KU.Student.JWEB.Book(e,r,n,i,s)}),r(n,a)},error:function(t,e,i){s(i)}})}return o?void 0:void r([])},error:function(t,e,i){s(i)}})},error:function(t,e,i){s(i)}})):void s("Please provide valid course id")},retrieveSchedule:function(t,e,i){var r="https://jweb.kettering.edu/cku1/bwskfshd.P_CrseSchdDetl?term_in="+t;$.ajax({url:r,type:"GET",dataType:"html",success:function(t,r,s){if(KU.Student.JWEB.isErrorPage(t))return void i("Request failed");for(var n=$("<div>").html(t),a=$("table.datadisplaytable",n),o=[],l=0;l+1<a.size();l+=2){var d,c,h,u,m,f,p,v,g,x,b,y,_=a.eq(l),q=a.eq(l+1);courseTitlePattern=/(.*)\s-\s(.*\s.*)\s-\s(\d\d)/;var w=function(t){return t.text().trim().toLowerCase()};if(courseTitlePattern.test(_.find("caption:first").text().trim())){var E=courseTitlePattern.exec(_.find("caption:first").text().trim());if(d=E[1],c=E[2].replace(" ","-"),h=E[3],u="",m="",f="",p="",v="",$("tbody tr",_).each(function(t){1==$("th",this).size()&&1==$("td",this).size()&&("associated term:"===w($("th",this))?u=$("td",this).text().trim():"crn:"===w($("th",this))?m=$("td",this).text().trim():"assigned instructor:"===w($("th",this))?f=$("td",this).text().trim():"credits:"===w($("th",this))?p=$("td",this).text().trim():"campus:"===w($("th",this))&&(v=$("td",this).text().trim()))}),g="",x="",b="",y="",q.find("tr").size()>1)for(var T=1;T<q.find("tr").size();T++){var k=q.find("tr").eq(0),j=q.find("tr").eq(T);k.find("th").size()==j.find("td").size()&&$("th",k).each(function(t){"schedule type"===w($(this))?g=$("td",j).eq(t).text().trim():"time"===w($(this))?x=$("td",j).eq(t).text().trim():"days"===w($(this))?b=$("td",j).eq(t).text().trim():"where"===w($(this))&&(y=$("td",j).eq(t).text().trim())}),o[o.length]=new KU.Student.JWEB.Course(d,c,h,u,m,f,p,v,g,x,b,y)}}}e(o)},error:function(t,e,r){i(r)}})}},e.BB={Contact:function(t,e,i){this.firstName=t,this.lastName=e,this.email=i},Grade:function(t,e,i,r,s,n,a){this.title=t,this.grade=e,this.pointsPossible=i,this.dueDate=r,this.postedDate=s,this.status=n,this.additionalInfo=a},Tree:function(t,e,i,r){return this.bbId=t,
this.contentId=e,this.folders=i,this.items=r,this},Folder:function(t,i,r,s){return this.bbId=t,this.contentId=i,this.name=r,this.details=s,this.getContentTree=function(t,i){e.BB.retrieveContentTree(this.bbId,this.contentId,t,i)},this},Item:function(t,e,i){return this.name=t,this.details=e,this.fullBBId=i,this},Course:function(t,i,r,s,n,a,o,l){return this.courseId=t,this.term=i,this.crn=r,this.section=s,this.courseTitle=n,this.days=a,this.time=o,this.bbId=l,this.getContentTree=function(t,i){e.BB.retrieveContentTree(this.bbId,"",t,i)},this.getRoster=function(t,e){KU.Student.BB.retrieveRoster(this.bbId,t,e)},this.getGrades=function(t,e){KU.Student.BB.retrieveGrades(this.bbId,t,e)},this},retrieveGrades:function(t,i,r){var s="https://kettering.blackboard.com/webapps/bb-mygrades-BBLEARN/myGrades?course_id="+t+"&stream_name=mygrades";$.ajax({url:s,type:"GET",dataType:"html",success:function(t){var r=$("<div>").html(t),s=[];$("#grades_wrapper > div.row",r).each(function(t){var i,r,n,a,o,l,d;i=$(".cell.gradable",this).clone().children().remove().end().text().trim(),""==i&&(i=$(".cell.gradable :first-child",this).text().trim()),r=$(".cell.grade > .grade",this).text().trim(),n=$(".cell.grade > .pointsPossible",this).text().trim().replace("/",""),a=$(".cell.gradable > .activityType",this).text().trim().replace("DUE:s",""),o=$(".cell.activity > .lastActivityDate",this).text().trim(),l=$(".cell.activity > .activityType",this).text().trim(),d="",$(".eval-links input.genericButton",this).each(function(t){var e=$(this).attr("onclick"),i=/mygrades\.showInLightBox.*div.*<p>(.*)<\/p>.*/;i.test(e)&&(""!=d&&(d+="\n"),d+=i.exec(e)[1])}),s[s.length]=new e.BB.Grade(i,r,n,a,o,l,d)}),i(s)},error:function(t,e,i){r(i)}})},retrieveRoster:function(t,i,r){var s="https://kettering.blackboard.com/webapps/blackboard/execute/searchRoster?showAll=true&action=sort&userInfoSearchOperatorString=Contains&courseId="+t+"&sortCol=column1&sortDir=ASCENDING&course_id="+t+"&userInfoSearchKeyString=FIRSTNAME&startIndex=0";$.ajax({url:s,type:"GET",dataType:"html",success:function(t){var r=$("<div>").html(t),s=[];r.find("#listContainer_databody tr").each(function(t){var i,r,n,a=$("th, td",this);3==a.size()&&(r=a.eq(0).find("span:first").text().trim(),i=a.eq(1).text().trim(),n=a.eq(2).text().trim(),s[s.length]=new e.BB.Contact(i,r,n))}),i(s)},error:function(t,e,i){r(i)}})},retrieveContentTree:function(t,i,r,s){var n,a,o=i;""===i?(n="https://kettering.blackboard.com/webapps/blackboard/execute/course/menuFolderViewGenerator?initTree=true&itemId=&storeScope=Session&course_id="+t+"&displayMode=courseMenu_newWindow&editMode=false&openInParentWindow=true",a=!0):(n="https://kettering.blackboard.com/webapps/blackboard/content/listContent.jsp?course_id="+t+"&content_id="+i,a=!1),$.ajax({url:n,type:"GET",dataType:"html",success:function(i){var n,l,d;if(n=[],l=[],a){var c,h;try{c=JSON.parse(i)}catch(u){return d=new e.BB.Tree(t,o,n,l),void r(d)}c.children.length>0&&(h=c.children[0].children);for(var m=0;m<h.length;m++){var f=h[m],p=/.*ReferredToType:CONTENT:::(_\d\d+_\d+)/;if(f.hasChildren&&p.test(f.id)){var v=$("<div>").html(f.contents).find("a");if(v.size()>0){var g=v.attr("title"),x=p.exec(f.id)[1];n[n.length]=new e.BB.Folder(t,x,g,"")}}}}else{var b=$("<div>").html(i);if(!e.BB.isLoggedIn(b))return void s("Check login.");var y=/.*folder_on.*/,_=/.*document_on.*/,q=/.*textbookLogo.*/,w=/contentListItem:(_\d\d+_\d+)/,E=$(".courseId",b).text();b.find("#content_listContainer > li").each(function(i){if(w.test($(this).attr("id"))){var r=$("> img",this).attr("src"),s=w.exec($(this).attr("id"))[1],a=$("#"+s,this).text().trim(),o=$("> div.details",this).html();y.test(r)?n[n.length]=new e.BB.Folder(t,s,a,o):_.test(r)||q.test(r)?l[l.length]=new e.BB.Item(a,o,E):0==$("> img",this).size()&&(l[l.length]=new e.BB.Item(a,o,E))}})}d=new e.BB.Tree(t,o,n,l),r(d)},error:function(t,e,i){s(i)}})},logout:function(t,i){var r="https://kettering.blackboard.com/webapps/login?action=logout";$.ajax({url:r,type:"POST",dataType:"html",success:function(r){var s=$("<div>").html(r);e.BB.isLoggedIn(s)?i("Does not appear to have logged out!"):t()},error:function(t,e,r){i(r)}})},login:function(t,i,r,s){var n="https://kettering.blackboard.com/webapps/login/";$.ajax({url:n,type:"POST",dataType:"html",data:{user_id:t,password:i,login:"Login",action:"login",new_loc:""},success:function(t){var i=$("<div>").html(t);e.BB.isLoggedIn(i)?r():s("Incorrect username or password.")},error:function(t,e,i){s(i)}})},checkLogIn:function(t,i){var r="https://kettering.blackboard.com/webapps/blackboard/execute/editUser?context=self_modify";$.ajax({url:r,type:"GET",dataType:"html",success:function(i){var r=$("<div>").html(i);e.BB.isLoggedIn(r)?t(!0,$("#userName",r).attr("value")):t(!1,"")},error:function(t,e,r){i(r)}})},isLoggedIn:function(t){return t.find(".logout-link").size()>0},downloadCourses:function(t,i){var r="https://kettering.blackboard.com/webapps/portal/execute/tabs/tabAction?action=refreshAjaxModule&modId=_4_1&tabId=_1_1&tab_tab_group_id=_1_1";$.ajax({url:r,type:"GET",dataType:"html",success:function(r){var s=$("<div>").html(r);if(1!=s.find("contents").size())return void i("Check login.");var n=[];s.find("contents li a").each(function(t){var i=$(this).attr("href"),r=$(this).text(),s=/.*&id=(_\d+_\d+).*/,a=/([a-zA-Z]+-\d\d\d)-(\d\d\d\d\d\d)-(\d\d\d\d\d):\s[a-zA-Z]+-\d\d\d-(\d\d[a-zA-Z]?):\s(.+)\s-\s[a-zA-Z]+\s([a-zA-Z]+)\s(\d\d?:\d\d-\d\d?:\d\d).*/,o=/([a-zA-Z]+-\d\d\d)-(\d\d\d\d\d\d)-(\d\d\d\d+):\s[a-zA-Z]+-\d\d\d:\s(.+)\s-\s[a-zA-Z]+/;if(a.test(r)&&s.test(i)){var l,d,c,h,u,m,f,p,v=s.exec(i)[1];l=a.exec(r),d=l[1],c=l[2],h=l[3],u=l[4],m=l[5],f=l[6],p=l[7],n[n.length]=new e.BB.Course(d,c,h,u,m,f,p,v)}else if(o.test(r)&&s.test(i)){var l,d,c,h,u,m,f,p,v=s.exec(i)[1];l=o.exec(r),d=l[1],c=l[2],h=l[3],m=l[4],u="TBD",f="TBD",p="TBD";var g=new e.BB.Course(d,c,h,u,m,f,p,v);"COOP"!=d&&(n[n.length]=g)}}),t(n)},error:function(t,e,r){i(r)}})}},t.Student=e}(KU),function(t){function e(t,e,i,r){this.name=t,this.code=e,this.city=i,this.state=r}function i(t,e,i,r,s,n){this.kuTitle=t,this.kuCourseId=e,this.transTitle=r,this.transCourseId=i,this.credits=s,this.college=n}var r={},s=null;r.searchByCollege=function(t,r,n){var a="https://okras.kettering.edu/kuapps/apex_apps.transfer_art_pkg.get_json_ces_credits?as_sbgi="+t,o=[];s=$.ajax({url:a,type:"GET",dataType:"html",success:function(n){var a=JSON.parse(n).entries,l=function(t,e){return t.kucourse<e.kucourse?-1:t.kucourse>e.kucourse?1:t.kucoursetitle<e.kucoursetitle?-1:t.kucoursetitle>e.kucoursetitle?1:0};a.sort(l);for(var d=0,c=0;c<a.length;c++){var h,u,m,f,p,v,g,$,x,b,y=a[c];"Y"==y.transferableflag&&(h=y.kucoursetitle.trim(),u=y.kucourse.trim(),m=y.trnscrse.trim(),f=y.trnscrsetitle.trim(),p=y.credits.trim(),g=y.institution.replace(t,"").trim(),$=t,v=new e(g,$,x,b),o[d++]=new i(h,u,m,f,p,v))}s=null,r(o)},error:function(t,e,i){s=null,"abort"!=e&&n(i)}})},r.searchByCourseId=function(t,r,n,a,o){var l="https://okras.kettering.edu/kuapps/apex_apps.transfer_art_pkg.get_json_transferable_courses?as_state=ALL&as_subject="+encodeURIComponent(t.toUpperCase())+"&as_course="+encodeURIComponent(r),d=[];s=$.ajax({url:l,type:"GET",dataType:"html",success:function(n){var o=JSON.parse(n).transfercourses,l=function(t,e){return t.course_state<e.course_state?-1:t.course_state>e.course_state?1:t.college<e.college?-1:t.college>e.college?1:t.course_title<e.course_title?-1:t.course_title>e.course_title?1:0};o.sort(l);for(var c=0;c<o.length;c++){var h,u,m,f,p,v,g,$,x,b,y=o[c];u=t.toUpperCase()+"-"+r,m=y.course,f=y.course_title,g=y.college,$=y.college_code,x=y.course_city,b=y.course_state,v=new e(g,$,x,b),d[c]=new i(h,u,m,f,p,v)}s=null,a(d)},error:function(t,e,i){s=null,"abort"!=e&&o(i)}})},r.getColleges=function(t,i){var r="https://okras.kettering.edu/kuapps/apex_apps.transfer_art_pkg.get_json_ces_colleges",s=[];$.ajax({url:r,type:"GET",dataType:"html",success:function(i){for(var r=JSON.parse(i).entries,n=0;n<r.length;n++){var a=r[n];s[n]=new e(a.stvsbgi_desc,a.stvsbgi_code)}t(s)},error:function(t){i(t)}})},r.abort=function(){null!=s&&(s.abort(),s=null)},t.Transfer=r}(KU);